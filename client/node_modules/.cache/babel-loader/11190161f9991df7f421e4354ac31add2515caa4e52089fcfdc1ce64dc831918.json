{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport * as ENV from \"../config\";\n\n// Async Thunks\nexport const fetchEvents = createAsyncThunk(\"events/fetchEvents\", async () => {\n  const res = await axios.get(`${ENV.SERVER_URL}/events`);\n  return res.data.events;\n});\nexport const registerEvent = createAsyncThunk(\"events/registerEvent\", async eventData => {\n  const res = await axios.post(`${ENV.SERVER_URL}/registerEvent`, eventData);\n  return res.data.event;\n});\nexport const updateEvent = createAsyncThunk(\"events/updateEvent\", async eventData => {\n  const res = await axios.put(`${ENV.SERVER_URL}/events/${eventData._id}`, eventData);\n  return res.data.event;\n});\nexport const deleteEvent = createAsyncThunk(\"events/deleteEvent\", async eventId => {\n  await axios.delete(`${ENV.SERVER_URL}/events/${eventId}`);\n  return eventId;\n});\nexport const initialEventState = {\n  events: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false\n};\nconst eventSlice = createSlice({\n  name: \"events\",\n  initialState: initialEventState,\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // .addCase(fetchEvents.pending, (state) => {\n    //   state.isLoading = true;\n    // })\n    // .addCase(fetchEvents.fulfilled, (state, action) => {\n    //   state.isLoading = false;\n    //   state.events = action.payload;\n    // })\n    // .addCase(fetchEvents.rejected, (state) => {\n    //   state.isLoading = false;\n    //   state.isError = true;\n    // })\n    // .addCase(registerEvent.pending, (state) => {\n    //   state.isLoading = true;\n    // })\n    // .addCase(registerEvent.fulfilled, (state, action) => {\n    //   state.isLoading = false;\n    //   state.events.push(action.payload);\n    //   state.isSuccess = true;\n    // })\n    // .addCase(registerEvent.rejected, (state) => {\n    //   state.isLoading = false;\n    //   state.isError = true;\n    // })\n    // .addCase(deleteEvent.fulfilled, (state, action) => {\n    //   state.events = state.events.filter((e) => e._id !== action.payload);\n    // })\n    // .addCase(updateEvent.fulfilled, (state, action) => {\n    //   const index = state.events.findIndex(\n    //     (e) => e._id === action.payload._id\n    //   );\n    //   if (index !== -1) state.events[index] = action.payload;\n    // });\n    .addCase(updateEvent.pending, state => {\n      state.isLoading = true;\n    }).addCase(updateEvent.fulfilled, (state, action) => {\n      state.isLoading = false;\n      const index = state.events.findIndex(e => e._id === action.payload._id);\n      if (index !== -1) state.events[index] = action.payload;\n    }).addCase(updateEvent.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    }).addCase(deleteEvent.pending, state => {\n      state.isLoading = true;\n    }).addCase(deleteEvent.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    });\n  }\n});\n\n// ✅ هنا نصدر الافتراضي\nexport default eventSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","ENV","fetchEvents","res","get","SERVER_URL","data","events","registerEvent","eventData","post","event","updateEvent","put","_id","deleteEvent","eventId","delete","initialEventState","isLoading","isSuccess","isError","eventSlice","name","initialState","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","index","findIndex","e","payload","rejected","reducer"],"sources":["C:/Users/HP/Desktop/Muyen_project/Muyen_project/client/src/Features/eventSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport * as ENV from \"../config\";\r\n\r\n// Async Thunks\r\nexport const fetchEvents = createAsyncThunk(\"events/fetchEvents\", async () => {\r\n  const res = await axios.get(`${ENV.SERVER_URL}/events`);\r\n  return res.data.events;\r\n});\r\n\r\nexport const registerEvent = createAsyncThunk(\r\n  \"events/registerEvent\",\r\n  async (eventData) => {\r\n    const res = await axios.post(`${ENV.SERVER_URL}/registerEvent`, eventData);\r\n    return res.data.event;\r\n  }\r\n);\r\n\r\nexport const updateEvent = createAsyncThunk(\r\n  \"events/updateEvent\",\r\n  async (eventData) => {\r\n    const res = await axios.put(\r\n      `${ENV.SERVER_URL}/events/${eventData._id}`,\r\n      eventData\r\n    );\r\n    return res.data.event;\r\n  }\r\n);\r\n\r\nexport const deleteEvent = createAsyncThunk(\r\n  \"events/deleteEvent\",\r\n  async (eventId) => {\r\n    await axios.delete(`${ENV.SERVER_URL}/events/${eventId}`);\r\n    return eventId;\r\n  }\r\n);\r\n\r\nexport const initialEventState = {\r\n  events: [],\r\n  isLoading: false,\r\n  isSuccess: false,\r\n  isError: false,\r\n};\r\n\r\nconst eventSlice = createSlice({\r\n  name: \"events\",\r\n  initialState: initialEventState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // .addCase(fetchEvents.pending, (state) => {\r\n      //   state.isLoading = true;\r\n      // })\r\n      // .addCase(fetchEvents.fulfilled, (state, action) => {\r\n      //   state.isLoading = false;\r\n      //   state.events = action.payload;\r\n      // })\r\n      // .addCase(fetchEvents.rejected, (state) => {\r\n      //   state.isLoading = false;\r\n      //   state.isError = true;\r\n      // })\r\n      // .addCase(registerEvent.pending, (state) => {\r\n      //   state.isLoading = true;\r\n      // })\r\n      // .addCase(registerEvent.fulfilled, (state, action) => {\r\n      //   state.isLoading = false;\r\n      //   state.events.push(action.payload);\r\n      //   state.isSuccess = true;\r\n      // })\r\n      // .addCase(registerEvent.rejected, (state) => {\r\n      //   state.isLoading = false;\r\n      //   state.isError = true;\r\n      // })\r\n      // .addCase(deleteEvent.fulfilled, (state, action) => {\r\n      //   state.events = state.events.filter((e) => e._id !== action.payload);\r\n      // })\r\n      // .addCase(updateEvent.fulfilled, (state, action) => {\r\n      //   const index = state.events.findIndex(\r\n      //     (e) => e._id === action.payload._id\r\n      //   );\r\n      //   if (index !== -1) state.events[index] = action.payload;\r\n      // });\r\n      .addCase(updateEvent.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(updateEvent.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        const index = state.events.findIndex(\r\n          (e) => e._id === action.payload._id\r\n        );\r\n        if (index !== -1) state.events[index] = action.payload;\r\n      })\r\n      .addCase(updateEvent.rejected, (state) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n      })\r\n      .addCase(deleteEvent.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(deleteEvent.rejected, (state) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n      });\r\n  },\r\n});\r\n\r\n// ✅ هنا نصدر الافتراضي\r\nexport default eventSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}