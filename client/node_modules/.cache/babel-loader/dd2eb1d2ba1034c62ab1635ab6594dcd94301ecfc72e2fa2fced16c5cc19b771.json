{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAppContext}from\"../Store/store\";import\"./EventRegister.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function EventRegister(){const{user,eventDispatch}=useAppContext();const navigate=useNavigate();const[name,setName]=useState((user===null||user===void 0?void 0:user.name)||\"\");// الاسم الافتراضي من المستخدم\nconst[phone,setPhone]=useState(\"\");const[eventId,setEventId]=useState(\"\");const events=[{id:1,title:\"Inclusive Job Fair - Salalah\"},{id:2,title:\"Web Accessibility Workshop\"}];const handleSubmit=async()=>{if(!name||!phone||!eventId)return alert(\"Please fill all fields\");try{const res=await fetch(\"http://localhost:3001/registerEvent\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name,phone,eventId})});const data=await res.json();if(res.ok){// تحديث Redux state مباشرة\neventDispatch({type:\"events/registerEvent/fulfilled\",payload:data.event});alert(\"Event registration successful!\");navigate(\"/settings\");}else{alert(data.error||\"Registration failed\");}}catch(err){console.error(err);alert(\"Server error. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"event-register-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"event-register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register for Event\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone Number\",value:phone,onChange:e=>setPhone(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:eventId,onChange:e=>setEventId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Event\"}),events.map(ev=>/*#__PURE__*/_jsx(\"option\",{value:ev.id,children:ev.title},ev.id))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-register\",onClick:handleSubmit,children:\"Submit\"})]})});}","map":{"version":3,"names":["React","useState","useNavigate","useAppContext","jsx","_jsx","jsxs","_jsxs","EventRegister","user","eventDispatch","navigate","name","setName","phone","setPhone","eventId","setEventId","events","id","title","handleSubmit","alert","res","fetch","method","headers","body","JSON","stringify","data","json","ok","type","payload","event","error","err","console","className","children","placeholder","value","onChange","e","target","map","ev","onClick"],"sources":["C:/Users/HP/Desktop/Muyen_project/Muyen_project/client/src/components/EventRegister.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAppContext } from \"../Store/store\";\r\nimport \"./EventRegister.css\";\r\n\r\nexport function EventRegister() {\r\n  const { user, eventDispatch } = useAppContext();\r\n  const navigate = useNavigate();\r\n\r\n  const [name, setName] = useState(user?.name || \"\"); // الاسم الافتراضي من المستخدم\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [eventId, setEventId] = useState(\"\");\r\n\r\n  const events = [\r\n    { id: 1, title: \"Inclusive Job Fair - Salalah\" },\r\n    { id: 2, title: \"Web Accessibility Workshop\" },\r\n  ];\r\n\r\n  const handleSubmit = async () => {\r\n    if (!name || !phone || !eventId) return alert(\"Please fill all fields\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:3001/registerEvent\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name, phone, eventId }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        // تحديث Redux state مباشرة\r\n        eventDispatch({\r\n          type: \"events/registerEvent/fulfilled\",\r\n          payload: data.event,\r\n        });\r\n\r\n        alert(\"Event registration successful!\");\r\n        navigate(\"/settings\");\r\n      } else {\r\n        alert(data.error || \"Registration failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Server error. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"event-register-page\">\r\n      <div className=\"event-register-container\">\r\n        <h1>Register for Event</h1>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Your Name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Phone Number\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n        />\r\n        <select value={eventId} onChange={(e) => setEventId(e.target.value)}>\r\n          <option value=\"\">Select Event</option>\r\n          {events.map((ev) => (\r\n            <option key={ev.id} value={ev.id}>\r\n              {ev.title}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <button className=\"btn-register\" onClick={handleSubmit}>\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}