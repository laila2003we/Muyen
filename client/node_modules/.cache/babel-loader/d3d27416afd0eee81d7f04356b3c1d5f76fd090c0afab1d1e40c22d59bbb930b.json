{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useAppContext}from\"../Store/store\";import{useNavigate}from\"react-router-dom\";import{ArrowLeft,Edit2,Trash2}from\"lucide-react\";import avatarImg from\"../Images/avatar.png\";import\"./Settings.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Settings(){const{user}=useAppContext();const navigate=useNavigate();const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);// ðŸ”¹ Fetch events from MongoDB\nuseEffect(()=>{const fetchEvents=async()=>{try{const res=await fetch(\"http://localhost:3001/events\");const data=await res.json();// âœ… Filter events by user name (ONLY OPTION)\nconst userEvents=data.events.filter(ev=>ev.name===user.name);setEvents(userEvents);setLoading(false);}catch(err){console.error(\"Failed to load events\",err);setLoading(false);}};if(user!==null&&user!==void 0&&user.name){fetchEvents();}},[user]);// ðŸ”™ Back\nconst handleBack=()=>navigate(\"/home\");// ðŸ—‘ Delete\nconst handleDelete=async id=>{const confirm=window.confirm(\"Are you sure?\");if(!confirm)return;try{const res=await fetch(\"http://localhost:3001/events/\".concat(id),{method:\"DELETE\"});if(res.ok){setEvents(prev=>prev.filter(e=>e._id!==id));alert(\"Event deleted\");}else{alert(\"Delete failed\");}}catch(err){console.error(err);}};// âœï¸ Edit\nconst handleEdit=event=>{navigate(\"/update-event\",{state:{event}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-header\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-btn\",onClick:handleBack,children:[/*#__PURE__*/_jsx(ArrowLeft,{size:18}),\" Back\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatarImg,alt:\"avatar\",className:\"user-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"p\",{children:user===null||user===void 0?void 0:user.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-events\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Events\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):events.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No events found.\"}):/*#__PURE__*/_jsx(\"ul\",{children:events.map(ev=>/*#__PURE__*/_jsxs(\"li\",{className:\"event-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:ev.eventId}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",ev.phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"edit-btn\",onClick:()=>handleEdit(ev),children:[/*#__PURE__*/_jsx(Edit2,{size:14}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"delete-btn\",onClick:()=>handleDelete(ev._id),children:[/*#__PURE__*/_jsx(Trash2,{size:14}),\" Delete\"]})]})]},ev._id))})]})]});}// import { UpdateEvent } from \"./UpdateEvent\";\n// import React, { useEffect, useState } from \"react\";\n// import { useAppContext } from \"../Store/store\";\n// import { useNavigate } from \"react-router-dom\";\n// import { ArrowLeft, Edit2, Trash2 } from \"lucide-react\";\n// import \"./Settings.css\";\n// export function Settings() {\n//   const { user, events, eventDispatch } = useAppContext();\n//   const navigate = useNavigate();\n//   const [userEvents, setUserEvents] = useState([]);\n//   useEffect(() => {\n//     if (user && events) {\n//       // filter events for the current user\n//       const filteredEvents = events.filter((ev) => ev.userId === user.id);\n//       setUserEvents(filteredEvents);\n//     }\n//   }, [user, events]);\n//   const handleBack = () => navigate(\"/home\");\n//   const handleDelete = async (id) => {\n//     try {\n//       const res = await fetch(`http://localhost:3001/events/${id}`, {\n//         method: \"DELETE\",\n//       });\n//       if (res.ok) {\n//         eventDispatch({ type: \"events/deleteEvent/fulfilled\", payload: id });\n//         setUserEvents((prev) => prev.filter((ev) => ev._id !== id));\n//         alert(\"Event deleted successfully\");\n//       } else {\n//         alert(\"Failed to delete event\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Server error while deleting event\");\n//     }\n//   };\n//   const handleEdit = (event) => {\n//     navigate(\"/updateevent\", { state: { event } });\n//   };\n//   return (\n//     <div className=\"settings-page\">\n//       <div className=\"settings-header\">\n//         <button className=\"back-btn\" onClick={handleBack}>\n//           <ArrowLeft size={20} /> Back\n//         </button>\n//         <h1>Settings</h1>\n//       </div>\n//       {/* User Info */}\n//       <div className=\"user-info\">\n//         <img src={avatarImg} alt=\"User Avatar\" className=\"user-avatar\" />\n//         <div className=\"user-details\">\n//           <h2>{user?.name || \"User Name\"}</h2>\n//           <p>{user?.email || \"User Email\"}</p>\n//           {user?.phone && <p>Phone: {user.phone}</p>}\n//         </div>\n//       </div>\n//       {/* User Events */}\n//       <div className=\"user-events\">\n//         <h3>My Events</h3>\n//         {userEvents.length === 0 ? (\n//           <p>No events registered yet.</p>\n//         ) : (\n//           <ul>\n//             {userEvents.map((ev) => (\n//               <li key={ev._id} className=\"event-card\">\n//                 <h4>{ev.name}</h4>\n//                 <p>\n//                   <strong>Phone:</strong> {ev.phone}\n//                 </p>\n//                 <p>\n//                   <strong>Event ID:</strong> {ev.eventId}\n//                 </p>\n//                 <p>\n//                   <strong>Date:</strong> {ev.date || \"Not set\"}\n//                 </p>\n//                 <p>\n//                   <strong>Location:</strong> {ev.location || \"Not set\"}\n//                 </p>\n//                 <div className=\"event-actions\">\n//                   <button className=\"edit-btn\" onClick={() => handleEdit(ev)}>\n//                     <Edit2 size={16} /> Edit\n//                   </button>\n//                   <button\n//                     className=\"delete-btn\"\n//                     onClick={() => handleDelete(ev._id)}\n//                   >\n//                     <Trash2 size={16} /> Delete\n//                   </button>\n//                 </div>\n//               </li>\n//             ))}\n//           </ul>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }\n// Settings.js","map":{"version":3,"names":["React","useEffect","useState","useAppContext","useNavigate","ArrowLeft","Edit2","Trash2","avatarImg","jsx","_jsx","jsxs","_jsxs","Settings","user","navigate","events","setEvents","loading","setLoading","fetchEvents","res","fetch","data","json","userEvents","filter","ev","name","err","console","error","handleBack","handleDelete","id","confirm","window","concat","method","ok","prev","e","_id","alert","handleEdit","event","state","className","children","onClick","size","src","alt","email","length","map","eventId","phone"],"sources":["C:/Users/HP/Desktop/Muyen_project/Muyen_project/client/src/components/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAppContext } from \"../Store/store\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ArrowLeft, Edit2, Trash2 } from \"lucide-react\";\nimport avatarImg from \"../Images/avatar.png\";\nimport \"./Settings.css\";\n\nexport function Settings() {\n  const { user } = useAppContext();\n  const navigate = useNavigate();\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // ðŸ”¹ Fetch events from MongoDB\n  useEffect(() => {\n    const fetchEvents = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3001/events\");\n        const data = await res.json();\n\n        // âœ… Filter events by user name (ONLY OPTION)\n        const userEvents = data.events.filter((ev) => ev.name === user.name);\n\n        setEvents(userEvents);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Failed to load events\", err);\n        setLoading(false);\n      }\n    };\n\n    if (user?.name) {\n      fetchEvents();\n    }\n  }, [user]);\n\n  // ðŸ”™ Back\n  const handleBack = () => navigate(\"/home\");\n\n  // ðŸ—‘ Delete\n  const handleDelete = async (id) => {\n    const confirm = window.confirm(\"Are you sure?\");\n    if (!confirm) return;\n\n    try {\n      const res = await fetch(`http://localhost:3001/events/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (res.ok) {\n        setEvents((prev) => prev.filter((e) => e._id !== id));\n        alert(\"Event deleted\");\n      } else {\n        alert(\"Delete failed\");\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // âœï¸ Edit\n  const handleEdit = (event) => {\n    navigate(\"/update-event\", { state: { event } });\n  };\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"settings-header\">\n        <button className=\"back-btn\" onClick={handleBack}>\n          <ArrowLeft size={18} /> Back\n        </button>\n        <h1>Settings</h1>\n      </div>\n\n      {/* ðŸ‘¤ User Info */}\n      <div className=\"user-info\">\n        <img src={avatarImg} alt=\"avatar\" className=\"user-avatar\" />\n        <div className=\"user-details\">\n          <h2>{user?.name}</h2>\n          <p>{user?.email}</p>\n        </div>\n      </div>\n\n      {/* ðŸŽ« Events */}\n      <div className=\"user-events\">\n        <h3>My Events</h3>\n\n        {loading ? (\n          <p>Loading...</p>\n        ) : events.length === 0 ? (\n          <p>No events found.</p>\n        ) : (\n          <ul>\n            {events.map((ev) => (\n              <li key={ev._id} className=\"event-card\">\n                <h4>{ev.eventId}</h4>\n                <p>\n                  <strong>Phone:</strong> {ev.phone}\n                </p>\n\n                <div className=\"event-actions\">\n                  <button className=\"edit-btn\" onClick={() => handleEdit(ev)}>\n                    <Edit2 size={14} /> Edit\n                  </button>\n\n                  <button\n                    className=\"delete-btn\"\n                    onClick={() => handleDelete(ev._id)}\n                  >\n                    <Trash2 size={14} /> Delete\n                  </button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// import { UpdateEvent } from \"./UpdateEvent\";\n\n// import React, { useEffect, useState } from \"react\";\n// import { useAppContext } from \"../Store/store\";\n// import { useNavigate } from \"react-router-dom\";\n// import { ArrowLeft, Edit2, Trash2 } from \"lucide-react\";\n// import \"./Settings.css\";\n\n// export function Settings() {\n//   const { user, events, eventDispatch } = useAppContext();\n//   const navigate = useNavigate();\n//   const [userEvents, setUserEvents] = useState([]);\n\n//   useEffect(() => {\n//     if (user && events) {\n//       // filter events for the current user\n//       const filteredEvents = events.filter((ev) => ev.userId === user.id);\n//       setUserEvents(filteredEvents);\n//     }\n//   }, [user, events]);\n\n//   const handleBack = () => navigate(\"/home\");\n\n//   const handleDelete = async (id) => {\n//     try {\n//       const res = await fetch(`http://localhost:3001/events/${id}`, {\n//         method: \"DELETE\",\n//       });\n//       if (res.ok) {\n//         eventDispatch({ type: \"events/deleteEvent/fulfilled\", payload: id });\n//         setUserEvents((prev) => prev.filter((ev) => ev._id !== id));\n//         alert(\"Event deleted successfully\");\n//       } else {\n//         alert(\"Failed to delete event\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Server error while deleting event\");\n//     }\n//   };\n\n//   const handleEdit = (event) => {\n//     navigate(\"/updateevent\", { state: { event } });\n//   };\n\n//   return (\n//     <div className=\"settings-page\">\n//       <div className=\"settings-header\">\n//         <button className=\"back-btn\" onClick={handleBack}>\n//           <ArrowLeft size={20} /> Back\n//         </button>\n//         <h1>Settings</h1>\n//       </div>\n\n//       {/* User Info */}\n//       <div className=\"user-info\">\n//         <img src={avatarImg} alt=\"User Avatar\" className=\"user-avatar\" />\n//         <div className=\"user-details\">\n//           <h2>{user?.name || \"User Name\"}</h2>\n//           <p>{user?.email || \"User Email\"}</p>\n//           {user?.phone && <p>Phone: {user.phone}</p>}\n//         </div>\n//       </div>\n\n//       {/* User Events */}\n//       <div className=\"user-events\">\n//         <h3>My Events</h3>\n//         {userEvents.length === 0 ? (\n//           <p>No events registered yet.</p>\n//         ) : (\n//           <ul>\n//             {userEvents.map((ev) => (\n//               <li key={ev._id} className=\"event-card\">\n//                 <h4>{ev.name}</h4>\n//                 <p>\n//                   <strong>Phone:</strong> {ev.phone}\n//                 </p>\n//                 <p>\n//                   <strong>Event ID:</strong> {ev.eventId}\n//                 </p>\n//                 <p>\n//                   <strong>Date:</strong> {ev.date || \"Not set\"}\n//                 </p>\n//                 <p>\n//                   <strong>Location:</strong> {ev.location || \"Not set\"}\n//                 </p>\n\n//                 <div className=\"event-actions\">\n//                   <button className=\"edit-btn\" onClick={() => handleEdit(ev)}>\n//                     <Edit2 size={16} /> Edit\n//                   </button>\n//                   <button\n//                     className=\"delete-btn\"\n//                     onClick={() => handleDelete(ev._id)}\n//                   >\n//                     <Trash2 size={16} /> Delete\n//                   </button>\n//                 </div>\n//               </li>\n//             ))}\n//           </ul>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }\n\n// Settings.js\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}