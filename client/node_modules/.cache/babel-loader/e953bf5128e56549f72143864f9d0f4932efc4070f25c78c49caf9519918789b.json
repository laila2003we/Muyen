{"ast":null,"code":"// import React, { useState, useEffect } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import { useAppContext } from \"../Store/store\";\n// export function UpdateEvent() {\n//   const location = useLocation();\n//   const navigate = useNavigate();\n//   const { eventDispatch } = useAppContext();\n//   // Get the event object passed from Profile/Settings\n//   const event = location.state?.event;\n//   // State variables\n//   const [name, setName] = useState(event?.name || \"\");\n//   const [phone, setPhone] = useState(event?.phone || \"\");\n//   const [eventId, setEventId] = useState(event?.eventId || \"\");\n//   const [date, setDate] = useState(event?.date || \"\");\n//   const [locationText, setLocationText] = useState(event?.location || \"\");\n//   // Handle update\n//   const handleUpdate = async () => {\n//     try {\n//       const updatedEvent = {\n//         _id: event._id,\n//         name,\n//         phone,\n//         eventId,\n//         date,\n//         location: locationText,\n//       };\n//       const res = await fetch(`http://localhost:3001/events/${event._id}`, {\n//         method: \"PUT\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify(updatedEvent),\n//       });\n//       const data = await res.json();\n//       if (res.ok) {\n//         alert(data.msg || \"Event updated successfully!\");\n//         // Update global state\n//         eventDispatch({\n//           type: \"events/updateEvent/fulfilled\",\n//           payload: updatedEvent,\n//         });\n//         navigate(\"/settings\"); // Back to settings page after update\n//       } else {\n//         alert(data.error || \"Update failed\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Server error. Please try again.\");\n//     }\n//   };\n//   return (\n//     <div className=\"update-event-page\">\n//       <h2>Update Event</h2>\n//       <label>Name</label>\n//       <input value={name} onChange={(e) => setName(e.target.value)} />\n//       <label>Phone</label>\n//       <input value={phone} onChange={(e) => setPhone(e.target.value)} />\n//       <label>Event ID</label>\n//       <input value={eventId} onChange={(e) => setEventId(e.target.value)} />\n//       <label>Date</label>\n//       <input\n//         type=\"date\"\n//         value={date}\n//         onChange={(e) => setDate(e.target.value)}\n//       />\n//       <label>Location</label>\n//       <input\n//         value={locationText}\n//         onChange={(e) => setLocationText(e.target.value)}\n//       />\n//       <button onClick={handleUpdate}>Update Event</button>\n//       <button\n//         onClick={() => navigate(\"/settings\")}\n//         style={{ marginTop: \"10px\" }}\n//       >\n//         Cancel / Back\n//       </button>\n//     </div>\n//   );\n// }\n// UpdateEvent.js\nimport React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import\"./UpdateEvent.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function UpdateEvent(){var _location$state;const navigate=useNavigate();const location=useLocation();// Event data passed from Settings page\nconst event=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.event;// Form states\nconst[name,setName]=useState(\"\");const[phone,setPhone]=useState(\"\");const[eventId,setEventId]=useState(\"\");const[loading,setLoading]=useState(false);// Redirect if no event data\nuseEffect(()=>{if(!event){navigate(\"/settings\");}else{setName(event.name);setPhone(event.phone);setEventId(event.eventId);}},[event,navigate]);// Submit update\nconst handleUpdate=async e=>{e.preventDefault();setLoading(true);try{const res=await fetch(\"http://localhost:3001/events/\".concat(event._id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name,phone,eventId})});if(res.ok){alert(\"Event updated successfully\");navigate(\"/settings\");}else{alert(\"Failed to update event\");}}catch(err){console.error(\"Update error:\",err);alert(\"Server error\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"update-event-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update Event\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"update-form\",onSubmit:handleUpdate,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:phone,onChange:e=>setPhone(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Event ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:eventId,onChange:e=>setEventId(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Updating...\":\"Update Event\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-btn\",onClick:()=>navigate(\"/settings\"),children:\"Cancel\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","UpdateEvent","_location$state","navigate","location","event","state","name","setName","phone","setPhone","eventId","setEventId","loading","setLoading","handleUpdate","e","preventDefault","res","fetch","concat","_id","method","headers","body","JSON","stringify","ok","alert","err","console","error","className","children","onSubmit","type","value","onChange","target","required","disabled","onClick"],"sources":["C:/Users/HP/Desktop/Muyen_project/Muyen_project/client/src/components/UpdateEvent.js"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\r\n// import { useLocation, useNavigate } from \"react-router-dom\";\r\n// import { useAppContext } from \"../Store/store\";\r\n\r\n// export function UpdateEvent() {\r\n//   const location = useLocation();\r\n//   const navigate = useNavigate();\r\n//   const { eventDispatch } = useAppContext();\r\n\r\n//   // Get the event object passed from Profile/Settings\r\n//   const event = location.state?.event;\r\n\r\n//   // State variables\r\n//   const [name, setName] = useState(event?.name || \"\");\r\n//   const [phone, setPhone] = useState(event?.phone || \"\");\r\n//   const [eventId, setEventId] = useState(event?.eventId || \"\");\r\n//   const [date, setDate] = useState(event?.date || \"\");\r\n//   const [locationText, setLocationText] = useState(event?.location || \"\");\r\n\r\n//   // Handle update\r\n//   const handleUpdate = async () => {\r\n//     try {\r\n//       const updatedEvent = {\r\n//         _id: event._id,\r\n//         name,\r\n//         phone,\r\n//         eventId,\r\n//         date,\r\n//         location: locationText,\r\n//       };\r\n\r\n//       const res = await fetch(`http://localhost:3001/events/${event._id}`, {\r\n//         method: \"PUT\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify(updatedEvent),\r\n//       });\r\n\r\n//       const data = await res.json();\r\n\r\n//       if (res.ok) {\r\n//         alert(data.msg || \"Event updated successfully!\");\r\n//         // Update global state\r\n//         eventDispatch({\r\n//           type: \"events/updateEvent/fulfilled\",\r\n//           payload: updatedEvent,\r\n//         });\r\n//         navigate(\"/settings\"); // Back to settings page after update\r\n//       } else {\r\n//         alert(data.error || \"Update failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Server error. Please try again.\");\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"update-event-page\">\r\n//       <h2>Update Event</h2>\r\n\r\n//       <label>Name</label>\r\n//       <input value={name} onChange={(e) => setName(e.target.value)} />\r\n\r\n//       <label>Phone</label>\r\n//       <input value={phone} onChange={(e) => setPhone(e.target.value)} />\r\n\r\n//       <label>Event ID</label>\r\n//       <input value={eventId} onChange={(e) => setEventId(e.target.value)} />\r\n\r\n//       <label>Date</label>\r\n//       <input\r\n//         type=\"date\"\r\n//         value={date}\r\n//         onChange={(e) => setDate(e.target.value)}\r\n//       />\r\n\r\n//       <label>Location</label>\r\n//       <input\r\n//         value={locationText}\r\n//         onChange={(e) => setLocationText(e.target.value)}\r\n//       />\r\n\r\n//       <button onClick={handleUpdate}>Update Event</button>\r\n\r\n//       <button\r\n//         onClick={() => navigate(\"/settings\")}\r\n//         style={{ marginTop: \"10px\" }}\r\n//       >\r\n//         Cancel / Back\r\n//       </button>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// UpdateEvent.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport \"./UpdateEvent.css\";\r\n\r\nexport function UpdateEvent() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // Event data passed from Settings page\r\n  const event = location.state?.event;\r\n\r\n  // Form states\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [eventId, setEventId] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Redirect if no event data\r\n  useEffect(() => {\r\n    if (!event) {\r\n      navigate(\"/settings\");\r\n    } else {\r\n      setName(event.name);\r\n      setPhone(event.phone);\r\n      setEventId(event.eventId);\r\n    }\r\n  }, [event, navigate]);\r\n\r\n  // Submit update\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(`http://localhost:3001/events/${event._id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          phone,\r\n          eventId,\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        alert(\"Event updated successfully\");\r\n        navigate(\"/settings\");\r\n      } else {\r\n        alert(\"Failed to update event\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Update error:\", err);\r\n      alert(\"Server error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"update-event-page\">\r\n      <h1>Update Event</h1>\r\n\r\n      <form className=\"update-form\" onSubmit={handleUpdate}>\r\n        <label>Full Name</label>\r\n        <input\r\n          type=\"text\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <label>Phone Number</label>\r\n        <input\r\n          type=\"text\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <label>Event ID</label>\r\n        <input\r\n          type=\"text\"\r\n          value={eventId}\r\n          onChange={(e) => setEventId(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? \"Updating...\" : \"Update Event\"}\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"cancel-btn\"\r\n          onClick={() => navigate(\"/settings\")}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}